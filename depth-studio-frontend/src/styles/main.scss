/**
 * ==============================================
 * DEPTH STUDIO - ملف الأنماط الرئيسي
 * Main Styles Entry Point
 * ==============================================
 */

// ===============================
// 🏗️ FOUNDATION SYSTEM
// ===============================

// البنية الأساسية - يجب أن تكون أولاً
@use 'foundation/_variables' as vars;
@use 'foundation/_colors' as colors;
@use 'foundation/_spacing' as spacing;
@use 'foundation/_typography' as typo;
@use 'foundation/_breakpoints' as breakpoints;

// ===============================
// 🔧 UTILITIES SYSTEM
// ===============================

// المساعدات والمكونات الأساسية
@use 'utilities/_mixins' as mixins;
@use 'utilities/_utilities';

// ===============================
// 📦 COMPONENTS STYLES
// ===============================

// UI Components
@use 'components/_buttons';
@use 'components/_cards';
@use 'components/_forms';
@use 'components/_tables';

// ===============================
// 🏗️ LAYOUT SYSTEM
// ===============================
@use 'layouts/_sidebar';
@use 'layouts/_topbar'; 
@use 'layouts/_main';
@use 'layouts/_responsive';

// ===============================
// 🎨 VUETIFY  
// ===============================

// تخصيص Vuetify ليتوافق مع نظامنا
.v-application {
  // استخدام خطوط النظام
  font-family: var(--font-family-primary) !important;
  
  // ألوان النصوص
  color: var(--color-text-primary) !important;
  background-color: var(--color-background) !important;
  
  // دعم RTL
  direction: rtl;
  text-align: right;
}

// === تخصيص مكونات Vuetify ===

// الأزرار
.v-btn {
  font-family: var(--font-family-primary) !important;
  font-weight: var(--font-weight-medium) !important;
  letter-spacing: var(--letter-spacing-wide) !important;
  @include mixins.border-radius("md");
  @include mixins.transition(all, "fast");
  
  &.v-btn--elevated {
    @include mixins.elevation(2);
    
    &:hover {
      @include mixins.elevation(4);
    }
  }
}

// البطاقات
.v-card {
  @include mixins.border-radius("md");
  @include mixins.elevation(1);
  background-color: var(--color-surface) !important;
  border: 1px solid var(--color-border);
  
  &:hover {
    @include mixins.elevation(2);
  }
  
  .v-card-title {
    @include mixins.text-style("heading-4");
    color: var(--color-text-primary) !important;
  }
  
  .v-card-subtitle {
    @include mixins.text-style("body-small");
    color: var(--color-text-secondary) !important;
  }
  
  .v-card-text {
    @include mixins.text-style("body");
    color: var(--color-text-primary) !important;
  }
}

// حقول الإدخال
.v-field {
  @include mixins.border-radius("md");
  
  .v-field__input {
    font-family: var(--font-family-primary) !important;
    color: var(--color-text-primary) !important;
  }
  
  .v-field__outline {
    color: var(--color-border) !important;
  }
  
  &.v-field--focused .v-field__outline {
    color: var(--color-primary) !important;
  }
}

// التطبيق البار
.v-app-bar {
  background-color: var(--color-surface) !important;
  border-bottom: 1px solid var(--color-divider) !important;
  @include mixins.backdrop-blur(10px);
}

// القوائم الجانبية
.v-navigation-drawer {
  background-color: var(--color-surface) !important;
  border-color: var(--color-divider) !important;
}

// الجداول
.v-data-table {
  background-color: var(--color-surface) !important;
  
  .v-data-table__tr {
    border-bottom: 1px solid var(--color-divider) !important;
    
    &:hover {
      background-color: var(--color-hover) !important;
    }
  }
  
  .v-data-table-header__content {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
    color: var(--color-text-secondary) !important;
  }
}

// ===============================
// 🌙 THEME SYSTEM
// ===============================

// الوضع المظلم
[data-theme="dark"] {
  .v-application {
    background-color: var(--color-background) !important;
    color: var(--color-text-primary) !important;
  }
  
  // تحديث ألوان Vuetify للوضع المظلم
  .v-btn {
    &.v-btn--variant-elevated {
      background-color: var(--color-surface-variant) !important;
      color: var(--color-text-primary) !important;
    }
  }
  
  .v-card {
    background-color: var(--color-surface) !important;
    border-color: var(--color-border) !important;
  }
  
  .v-field {
    .v-field__input {
      color: var(--color-text-primary) !important;
    }
    
    .v-field__outline {
      color: var(--color-border) !important;
    }
  }
}

// ===============================
// 🎨 GLOBAL STYLES
// ===============================

// إعدادات العناصر الأساسية
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  
  // تحسين الأداء
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  
  // الخط الأساسي
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  background-color: var(--color-background);
  
  // دعم العربية
  direction: rtl;
  text-align: right;
  
  // تحسينات الهاتف
  @include mixins.mobile-optimized;
}

// العناوين
h1, h2, h3, h4, h5, h6 {
  margin: 0;
  font-family: var(--font-family-display);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

h1 { 
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
}
h2 { 
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
}
h3 { 
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
}
h4 { 
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}
h5 { 
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
}
h6 { 
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
}

// الفقرات والنصوص
p {
  margin: 0 0 1rem 0;
  font-size: var(--font-size-base);
  line-height: var(--line-height-relaxed);
}

// الروابط
a {
  color: var(--color-primary);
  text-decoration: none;
  @include mixins.transition(color);
  
  &:hover {
    color: var(--color-primary-variant);
    text-decoration: underline;
  }
  
  &:focus-visible {
    @include mixins.focus-effect;
  }
}

// القوائم
ul, ol {
  margin: 0 0 1rem 0;
  padding-right: 1.5rem;
  padding-left: 0;
}

// الصور
img {
  max-width: 100%;
  height: auto;
  display: block;
}

// عناصر النماذج
input, textarea, select, button {
  font-family: inherit;
  font-size: inherit;
}

button {
  cursor: pointer;
  
  &:disabled {
    @include mixins.disabled-effect;
  }
}

// ===============================
// 🔍 FOCUS MANAGEMENT
// ===============================

// إخفاء outline الافتراضي واستبداله بنظامنا
*:focus {
  outline: none;
}

*:focus-visible {
  @include mixins.focus-effect;
}

// ===============================
// 📱 RESPONSIVE HELPERS
// ===============================

// حاوي النطبيق الأساسي
.app-container {
  min-height: 100vh;
}

// المحتوى الرئيسي
.main-content {
  flex: 1;
  padding: var(--container-padding);
}

@media (max-width: 768px) {
  .main-content {
    padding: var(--spacing-md);
  }
}

// منطقة المحتوى
.content-area {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--section-gap) 0;
}

// ===============================
// 🎭 ANIMATIONS & TRANSITIONS
// ===============================

// تحسين الأداء للحركات
.animate-gpu {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

// إيقاف الحركات لمن يفضل ذلك
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ===============================
// 📄 PRINT STYLES
// ===============================

@media print {
  * {
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  body {
    font-family: 'Times New Roman', serif;
    font-size: 12pt;
    line-height: 1.4;
    direction: rtl;
  }
  
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
  }
  
  p, blockquote {
    orphans: 3;
    widows: 3;
  }
  
  .v-app-bar,
  .v-navigation-drawer,
  .v-btn,
  .no-print {
    display: none !important;
  }
}

// ===============================
// 🎨 COMPONENT SYSTEM
// =============================== 

// 📦 تحديث: مكونات مشتركة إضافية
// Common Components (Enhanced)
.loading-state {
  // تطبيق المتغيرات العامة
  --loading-color: var(--color-primary);
}

.empty-state {
  // تطبيق المتغيرات العامة للحالة الفارغة
  min-height: var(--empty-state-min-height, 200px);
}

.error-boundary {
  // تطبيق المتغيرات العامة لحدود الأخطاء
  --error-boundary-background: var(--color-surface);
}

// 🔧 Utility Classes للمكونات الجديدة
.u-loading {
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(var(--color-surface-rgb), 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
}

.u-error-state {
  border: 1px solid var(--color-error);
  background: var(--color-error-container);
  @include mixins.border-radius("md");
  padding: var(--spacing-md);
}

.u-empty-state {
  min-height: 300px;
  @include mixins.flex-center(column, var(--spacing-md));
  opacity: 0.8;
} 