rules_version = '2';

// ğŸ”’ Ù‚ÙˆØ§Ø¹Ø¯ Ø£Ù…Ø§Ù† Firestore Ù…Ø­Ø¯Ø«Ø© - Depth Studio (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©)
// ğŸ“… Ù…Ø­Ø¯Ø«: Ø¯ÙŠØ³Ù…Ø¨Ø± 19, 2024  
// ğŸ‘¤ Ø§Ù„Ù…Ø·ÙˆØ±: Ø¹Ù„ÙŠ Ø¬ÙˆØ¯Øª
// ğŸ¯ Ù…ØªÙˆØ§ÙÙ‚ 100% Ù…Ø¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ ÙˆØ§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©

service cloud.firestore {
  match /databases/{database}/documents {
    
    // ==========================================
    // ğŸ› ï¸ HELPER FUNCTIONS (Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©)
    // ==========================================
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function isOwner(userId) {
      return request.auth.uid == userId;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Admin (Ù…Ø­Ø¯Ø« Ù„Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
    function isAdmin() {
      return isAuthenticated() && 
             exists(/databases/$(database)/documents/users/$(request.auth.uid)) &&
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.primary_role == 'admin';
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Marketing Coordinator
    function isMarketingCoordinator() {
      return isAuthenticated() && 
             exists(/databases/$(database)/documents/users/$(request.auth.uid)) &&
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.primary_role == 'marketing_coordinator';
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Brand Coordinator
    function isBrandCoordinator() {
      return isAuthenticated() && 
             exists(/databases/$(database)/documents/users/$(request.auth.uid)) &&
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.primary_role == 'brand_coordinator';
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Photographer
    function isPhotographer() {
      return isAuthenticated() && 
             exists(/databases/$(database)/documents/users/$(request.auth.uid)) &&
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.primary_role == 'photographer';
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© (Admin Ø£Ùˆ Marketing Coordinator)
    function hasAdminAccess() {
      return isAdmin() || isMarketingCoordinator();
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ user_permissions (Ù…Ø­Ø¯Ø« Ù„Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
    function hasPermission(permissionType, action) {
      return isAuthenticated() && 
             exists(/databases/$(database)/documents/user_permissions/$(request.auth.uid)) &&
             get(/databases/$(database)/documents/user_permissions/$(request.auth.uid)).data.permissions[permissionType][action] == true;
    }
    
    // ==========================================
    // ğŸ‘¥ USERS COLLECTION (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
    // ==========================================
    match /users/{userId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if isOwner(userId) || hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Admin Ø£Ùˆ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø°Ø§ØªÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯
      allow create: if isAdmin() || 
                       (isOwner(userId) && request.auth.uid == userId);
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ø£Ùˆ Admin Ù„Ù„ÙƒÙ„
      allow update: if (isOwner(userId) && 
                        // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ - Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆØ± ÙˆØ§Ù„UID
                        (!("primary_role" in request.resource.data.diff(resource.data).changedKeys()) &&
                         !("firebase_uid" in request.resource.data.diff(resource.data).changedKeys()))) ||
                       isAdmin();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ” USER_PERMISSIONS COLLECTION (Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)
    // ==========================================
    match /user_permissions/{userId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if isOwner(userId) || hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ« ÙˆØ§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow create, update, delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ“¸ PHOTOGRAPHER_INFO COLLECTION (Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØµÙˆØ±ÙŠÙ†)
    // ==========================================
    match /photographer_info/{infoId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…ØµÙˆØ± Ù†ÙØ³Ù‡ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Admin Ø£Ùˆ Ø§Ù„Ù…ØµÙˆØ± Ù†ÙØ³Ù‡
      allow create: if (request.resource.data.user_id == request.auth.uid && isPhotographer()) ||
                       isAdmin();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…ØµÙˆØ± Ù†ÙØ³Ù‡ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow update: if resource.data.user_id == request.auth.uid ||
                       hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ¢ BRANDS COLLECTION (Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯Ø§Øª)
    // ==========================================
    match /brands/{brandId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØµØ±Ø­ Ù„Ù‡Ù…
      allow read: if isAuthenticated();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Admin ÙÙ‚Ø·
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Admin Ø£Ùˆ Brand Coordinator Ø§Ù„Ù…Ø®ØµØµ Ù„Ù„Ø¨Ø±Ø§Ù†Ø¯
      allow update: if hasAdminAccess() ||
                       (isBrandCoordinator() && resource.data.assigned_coordinator == request.auth.uid);
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ¯ CAMPAIGNS COLLECTION (Ø§Ù„Ø­Ù…Ù„Ø§Øª)
    // ==========================================
    match /campaigns/{campaignId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØµØ±Ø­ Ù„Ù‡Ù…
      allow read: if isAuthenticated();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Admin Ø£Ùˆ Marketing Coordinator
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Admin Ø£Ùˆ Ø§Ù„Ù…ØµÙˆØ± Ø§Ù„Ù…ÙƒÙ„Ù Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙÙ‚Ø·
      allow update: if hasAdminAccess() ||
                       (isPhotographer() && 
                        request.auth.uid in resource.data.assigned_photographers &&
                        request.resource.data.diff(resource.data).changedKeys().hasOnly(['status']));
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ“ CONTENT COLLECTION (Ø§Ù„Ù…Ø­ØªÙˆÙ‰)
    // ==========================================
    match /content/{contentId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…ØµÙˆØ± Ø§Ù„Ù…Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡ Ø£Ùˆ Brand Coordinator Ù„Ù„Ø¨Ø±Ø§Ù†Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯
      allow read: if isAuthenticated() && (
                     resource.data.photographer_id == request.auth.uid ||
                     hasAdminAccess() ||
                     (isBrandCoordinator() && 
                      exists(/databases/$(database)/documents/brands/$(resource.data.brand_id)) &&
                      get(/databases/$(database)/documents/brands/$(resource.data.brand_id)).data.assigned_coordinator == request.auth.uid)
                  );
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù…ØµÙˆØ± Ø§Ù„Ù…Ø®ÙˆÙ„ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow create: if isPhotographer() || hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…ØµÙˆØ± Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŒ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
      allow update: if (resource.data.photographer_id == request.auth.uid && 
                        request.resource.data.diff(resource.data).changedKeys().hasOnly(['tags'])) ||
                       hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Ø§Ù„Ù…ØµÙˆØ± Ø§Ù„Ù…Ø§Ù„Ùƒ Ø£Ùˆ Admin
      allow delete: if resource.data.photographer_id == request.auth.uid ||
                       isAdmin();
    }
    
    // ==========================================
    // ğŸ“‚ CONTENT_CATEGORIES COLLECTION (ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰)
    // ==========================================
    match /content_categories/{categoryId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØµØ±Ø­ Ù„Ù‡Ù…
      allow read: if isAuthenticated();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ« ÙˆØ§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow create, update, delete: if hasAdminAccess();
    }
    
    // ==========================================
    // ğŸ’° PAYMENTS COLLECTION (Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª)
    // ==========================================
    match /payments/{paymentId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø¹Ù†ÙŠ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Admin Ø£Ùˆ Marketing Coordinator
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Admin ÙÙ‚Ø· (Ù„Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©)
      allow update: if hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ¥ EQUIPMENT COLLECTION (Ø§Ù„Ù…Ø¹Ø¯Ø§Øª)
    // ==========================================
    match /equipment/{equipmentId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØµØ±Ø­ Ù„Ù‡Ù…
      allow read: if isAuthenticated();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«: Admin Ø£Ùˆ Marketing Coordinator Ø£Ùˆ Ø§Ù„Ù…Ø§Ù„Ùƒ
      allow create, update: if hasAdminAccess() ||
                               (isPhotographer() && resource.data.owner_id == request.auth.uid);
      
      // Ø§Ù„Ø­Ø°Ù: Admin Ø£Ùˆ Ø§Ù„Ù…Ø§Ù„Ùƒ
      allow delete: if isAdmin() ||
                       (isPhotographer() && resource.data.owner_id == request.auth.uid);
    }
    
    // ==========================================
    // ğŸ”” NOTIFICATIONS COLLECTION (Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
    // ==========================================
    match /notifications/{notificationId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø¯Ø¯ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù†Ø¸Ø§Ù… (Admin) Ø£Ùˆ Marketing Coordinator
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow update: if (resource.data.user_id == request.auth.uid && 
                        request.resource.data.diff(resource.data).changedKeys().hasOnly(['is_read', 'status'])) ||
                       hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ“± PHONE_VERIFICATIONS COLLECTION (ØªØ­Ù‚Ù‚ Ø§Ù„Ù‡ÙˆØ§ØªÙ)
    // ==========================================
    match /phone_verifications/{verificationId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„Ù„Ø±Ù‚Ù… Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…ØµØ±Ø­ Ù„Ù‡ Ù„Ù„ØªØ³Ø¬ÙŠÙ„ØŒ Ø£Ùˆ Ø§Ù„Ù†Ø¸Ø§Ù…
      allow create: if isAuthenticated() || hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ØŒ Ø£Ùˆ Ø§Ù„Ù†Ø¸Ø§Ù…
      allow update: if resource.data.user_id == request.auth.uid ||
                       hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· Ù„Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
      allow delete: if hasAdminAccess();
    }
    
    // ==========================================
    // ğŸ” AUTH_METHODS COLLECTION (Ø·Ø±Ù‚ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©)
    // ==========================================
    match /auth_methods/{methodId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡ Ø£Ùˆ Ø§Ù„Ù†Ø¸Ø§Ù…
      allow create: if request.resource.data.user_id == request.auth.uid ||
                       hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚
      allow update: if resource.data.user_id == request.auth.uid ||
                       hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ (Ù„Ø­Ø°Ù Ø·Ø±ÙŠÙ‚Ø© Ù…ØµØ§Ø¯Ù‚Ø©) Ø£Ùˆ Admin
      allow delete: if resource.data.user_id == request.auth.uid ||
                       isAdmin();
    }
    
    // ==========================================
    // ğŸ­ ROLE_APPLICATIONS COLLECTION (Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)
    // ==========================================
    match /role_applications/{applicationId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙØ³Ù‡ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø¯ÙˆØ±
      allow create: if request.resource.data.user_id == request.auth.uid;
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Admin ÙÙ‚Ø· Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø£Ùˆ Ø§Ù„Ø±ÙØ¶
      allow update: if hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø·
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ“œ OTP_LOGS COLLECTION (Ø³Ø¬Ù„ Ø±Ù…ÙˆØ² OTP)
    // ==========================================
    match /otp_logs/{logId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Admin ÙÙ‚Ø· Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„
      allow read: if hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ OTP
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ…
      allow update: if hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø· Ù„Ù„ØªÙ†Ø¸ÙŠÙ
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ“Š AUTH_ACTIVITY_LOGS COLLECTION (Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©)
    // ==========================================
    match /auth_activity_logs/{activityId} {
      // Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„Ù„Ù†Ø´Ø§Ø· Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡
      allow read: if resource.data.user_id == request.auth.uid ||
                     hasAdminAccess();
      
      // Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø·
      allow create: if hasAdminAccess();
      
      // Ø§Ù„ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· (Ø¹Ø§Ø¯Ø© Ù„Ø§ ÙŠÙØ­Ø¯Ø«)
      allow update: if hasAdminAccess();
      
      // Ø§Ù„Ø­Ø°Ù: Admin ÙÙ‚Ø· Ù„Ù„ØªÙ†Ø¸ÙŠÙ
      allow delete: if isAdmin();
    }
    
    // ==========================================
    // ğŸ—‘ï¸ CATCH-ALL RULE (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)
    // ==========================================
    // Ø±ÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø£ÙŠ collection ØºÙŠØ± Ù…Ø­Ø¯Ø¯ ØµØ±Ø§Ø­Ø©
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

// ==========================================
// ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:
// ==========================================
//
// âœ… Ù…ØªÙˆØ§ÙÙ‚ 100% Ù…Ø¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
// âœ… ÙŠØ¯Ø¹Ù… 10 collections ÙÙ‚Ø· (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 19)
// âœ… ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø¨Ø³Ø·Ø© ÙˆÙˆØ§Ø¶Ø­Ø©
// âœ… Ø£Ù…Ø§Ù† Ù…Ø­ÙƒÙ… Ù…Ø¹ Ù…Ø±ÙˆÙ†Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
// âœ… admin Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† super_admin
// âœ… photographer_info Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† photographer_profiles
// âœ… campaigns Ù…ÙˆØ­Ø¯Ø© (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† smart_campaigns + campaign_tasks)
// âœ… notifications Ù…ÙˆØ­Ø¯Ø© (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† campaign_notifications)
// âœ… payments Ùˆ equipment Ù…Ø¶Ø§ÙØ©
//
// ğŸ”„ Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ø¯ÙŠØ³Ù…Ø¨Ø± 19, 2024
// ğŸ‘¨â€ï¿½ï¿½ Ø§Ù„Ù…Ø·ÙˆØ±: Ø¹Ù„ÙŠ Ø¬ÙˆØ¯Øª 