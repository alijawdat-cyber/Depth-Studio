const fs = require('fs');
const { execSync } = require('child_process');

// Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON
const seedData = JSON.parse(fs.readFileSync('seed-data.json', 'utf8'));

console.log('ğŸŒ± Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ø¥Ù„Ù‰ Firestore...\n');

try {
  // ÙƒØªØ§Ø¨Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ Ù„Ø±ÙØ¹Ù‡Ø§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©
  const allDataFile = 'all-seed-data.json';
  fs.writeFileSync(allDataFile, JSON.stringify(seedData, null, 2));
  
  console.log('ğŸ“‚ Ø±ÙØ¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª...');
  
  // Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase CLI
  const command = `firebase firestore:import ${allDataFile} --project depth-studio`;
  execSync(command, { stdio: 'inherit' });
  
  console.log('âœ… ØªÙ… Ø±ÙØ¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\n');
  
  // Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¤Ù‚Øª
  fs.unlinkSync(allDataFile);
  
  // Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
  console.log('ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©:');
  Object.keys(seedData).forEach(collectionName => {
    const documentsCount = Object.keys(seedData[collectionName]).length;
    console.log(`- ${collectionName}: ${documentsCount} ÙˆØ«ÙŠÙ‚Ø©`);
  });
  
} catch (error) {
  console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error.message);
}

console.log('\nğŸ‰ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø¹Ù…Ù„ÙŠØ© Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!'); 